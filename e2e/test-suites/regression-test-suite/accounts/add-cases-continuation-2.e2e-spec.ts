import { StepLogger } from '../../../../core/logger/step-logger';
import { PageHelper } from '../../../components/html/page-helper';
import { AccountsPageHelper } from '../../../page-objects/pages/accounts/accounts.helper';
import { HomePage1Helper } from '../../../page-objects/pages/home-page/home-page1.helper';
import { LoginPageHelper } from '../../../page-objects/pages/login-page/login-page.helper';
import { SuiteNames } from '../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await PageHelper.restartBrowser();
        await loginPageHelper.goTo();
    });

    // Jira References - COTRAC-3468
    it('To verify that user is able to go to the Cases tab. - [22945979]', async () => {
        // Auto generated by aurea-automation - util on Tue, 26 Mar 2019 22:45:37 GMT

        StepLogger.caseId = 22945979;
        StepLogger.preCondition('Sign in');
        await LoginPageHelper.loginAsAdmin();

        StepLogger.stepId(1);
        StepLogger.step('Expand the Opportunities menu in the left panel.');
        await HomePage1Helper.clickOnOpportunitiesMenu();
        StepLogger.verification('It should be expanded.');
        await HomePage1Helper.verifyOpportunitiesSubmenuOptions();

        StepLogger.stepId(2);
        StepLogger.step('Click "Production"');
        await HomePage1Helper.clickOnProductionUnderOpportunities();
        StepLogger.verification('List of accounts with there production type should be displayed.');
        await AccountsPageHelper.verifyAccountsListDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any account listed there.');
        await AccountsPageHelper.clickOnAnAccount();
        StepLogger.verification('Accounts detail should be displayed.');
        await AccountsPageHelper.verifyAccountDetailsPageDisplayed();

        StepLogger.stepId(4);
        StepLogger.step('Go to Cases tab.');
        await AccountsPageHelper.clickOnCasesTab();
        StepLogger.verification('Case page should be displayed.');
        await AccountsPageHelper.verifyCasesListDisplayed();
    });

    // Jira References - COTRAC-3469
    it('To verify user is able to expand and collapse the grouped case list. - [22946049]', async () => {
        // Auto generated by aurea-automation - util on Tue, 26 Mar 2019 22:45:37 GMT

        StepLogger.caseId = 22946049;
        StepLogger.preCondition('Login, create a group and group cases');
        await LoginPageHelper.loginAsAdmin();
        await AccountsPageHelper.createACaseAndGroupTheCases();

        StepLogger.stepId(1);
        StepLogger.step('Verify the cases are grouped.');
        StepLogger.verification('Cases should be grouped.');
        await AccountsPageHelper.verifyRecordsGrouped();

        StepLogger.stepId(2);
        StepLogger.step('Click [-] collapse icon displayed with the group name.');
        await AccountsPageHelper.clickOnCollapseGroupIcon();
        StepLogger.verification('The group should be collapsed.');
        await AccountsPageHelper.verifygroupCollapsed();

        StepLogger.stepId(3);
        StepLogger.step('Click [+] expand icon displayed with the group name.');
        await AccountsPageHelper.clickOnExpandGroupIcon();
        StepLogger.verification('The group should be expanded.');
        await AccountsPageHelper.verifyAllGroupsExpanded();
    });
});
