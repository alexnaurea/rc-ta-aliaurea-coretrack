import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { AccountsOnePageHelper } from '../../../../page-objects/pages/accounts/accounts-one.helper';
import { AccountsPageHelper } from '../../../../page-objects/pages/accounts/accounts.helper';
import { HomePage } from '../../../../page-objects/pages/home-page/home-page.po';
import { HomePage1Helper } from '../../../../page-objects/pages/home-page/home-page1.helper';
import { LoginPageHelper } from '../../../../page-objects/pages/login-page/login-page.helper';
import { NewTaskPageConstant } from '../../../../page-objects/pages/new-task-page/new-task-page.constants';
import { NewTaskPageHelper } from '../../../../page-objects/pages/new-task-page/new-task-page.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await PageHelper.restartBrowser();
        await loginPageHelper.goTo();
    });

    // Jira References - COTRAC-2170
    it('Verify that user is able to access Production page - [22946585]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:27 GMT

        StepLogger.caseId = 22946585;
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await LoginPageHelper.loginAsAdmin();

        StepLogger.stepId(1);
        StepLogger.step('Expand the Opportunities menu in the left panel');
        await HomePage1Helper.clickOnOpportunitiesMenu();
        StepLogger.verification('Opportunities menu should get expanded');
        await HomePage1Helper.verifyOpportunitiesSubmenuOptions();

        StepLogger.stepId(2);
        StepLogger.step('Verify that Production option is displayed under Opportunities');
        StepLogger.verification('Production option should be displayed under Opportunities');
        await HomePage.opportunities.production.verifyDisplayedStatus();

        StepLogger.stepId(3);
        StepLogger.step('Click on Production menu');
        await HomePage1Helper.clickOnProductionUnderOpportunities();
        StepLogger.verification('Production page should be displayed');
        await AccountsPageHelper.verifyAccountsListDisplayed();
    });

    // Jira References - COTRAC-2170
    it('Verify that user is able to access Accounts details page - [22946617]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:27 GMT

        StepLogger.caseId = 22946617;
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await LoginPageHelper.loginAsAdmin();

        StepLogger.stepId(1);
        StepLogger.step('Expand the Opportunities menu in the left panel');
        await HomePage1Helper.clickOnOpportunitiesMenu();
        StepLogger.verification('Opportunities menu should get expanded');
        await HomePage1Helper.verifyOpportunitiesSubmenuOptions();

        StepLogger.stepId(2);
        StepLogger.step('Verify that Production option is displayed under Opportunities');
        StepLogger.verification('Production option should be displayed under Opportunities');
        await HomePage.opportunities.production.verifyDisplayedStatus();

        StepLogger.stepId(3);
        StepLogger.step('Click on Production menu');
        await HomePage1Helper.clickOnProductionUnderOpportunities();
        StepLogger.verification('Production page should be displayed');
        await AccountsPageHelper.verifyAccountsListDisplayed();

        StepLogger.stepId(4);
        StepLogger.step('Click on any selected account listed in the Production page');
        await AccountsPageHelper.clickOnAnAccount();
        StepLogger.verification('Selected Accounts detail page should be displayed in a new page');
        await AccountsPageHelper.verifyAccountDetailsPageDisplayed();
    });

    // Jira References - COTRAC-2170
    it('Verify that User can open Tasks tab for the selected Account - [22946641]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:26 GMT

        StepLogger.caseId = 22946641;
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await LoginPageHelper.loginAsAdmin();
        await HomePage1Helper.clickOnOpportunitiesMenu();
        await HomePage1Helper.verifyOpportunitiesSubmenuOptions();

        StepLogger.stepId(1);
        StepLogger.step('Click on Production menu under Opportunities in the left panel');
        await HomePage1Helper.clickOnProductionUnderOpportunities();
        StepLogger.verification('Production page should be displayed');
        await AccountsPageHelper.verifyAccountsListDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on any selected account listed in the Production page');
        await AccountsPageHelper.clickOnAnAccount();
        StepLogger.verification('Selected Accounts detail page should be displayed in a new page');
        await AccountsPageHelper.verifyAccountDetailsPageDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Go to task tab from the left menu panel');
        await AccountsOnePageHelper.clickTasksTabInSidebar();
        StepLogger.verification('Tasks should be displayed in a grid view for the opened case');
        await AccountsOnePageHelper.verifyTasksPageIsDisplayed();
    });

    // Jira References - COTRAC-2170
    it('Verify the Task page grid for the selected Account - [22946643]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:26 GMT

        StepLogger.caseId = 22946643;
        const uniqueText = await PageHelper.getUniqueId();
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await AccountsOnePageHelper.navigateAndCreatTask(uniqueText);

        StepLogger.stepId(1);
        StepLogger.step('Go to task tab from the left menu panel');
        await AccountsOnePageHelper.clickTasksTabInSidebar();
        StepLogger.verification('Tasks should be displayed in a grid view for the opened Account');
        await AccountsOnePageHelper.verifyTasksPageIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify all tasks are displayed in a grid view');
        StepLogger.verification('List of tasks should be displayed in Grid view');
        await AccountsOnePageHelper.verifyTaskIsSavedAndDisplayedUnderTaskQueue(uniqueText);

        StepLogger.stepId(3);
        StepLogger.step('Verify the column names of the grid');
        StepLogger.verification('Tasks list should be displayed with Header names');
        await AccountsOnePageHelper.verifyTaskTableColumns();
    });

    // Jira References - COTRAC-2170
    it('Verify that the User can access Edit Task page for a selected task - [22946644]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:27 GMT

        StepLogger.caseId = 22946644;
        const uniqueText = await PageHelper.getUniqueId();
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await AccountsOnePageHelper.navigateAndCreatTask(uniqueText);

        StepLogger.stepId(1);
        StepLogger.step('Go to task tab from the left menu panel');
        await AccountsOnePageHelper.clickTasksTabInSidebar();
        StepLogger.verification('Tasks should be displayed in a grid view for the opened Account');
        await AccountsOnePageHelper.verifyTasksPageIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify all tasks are displayed in a grid view');
        StepLogger.verification('List of tasks should be displayed in Grid view');
        await AccountsOnePageHelper.verifyTaskIsSavedAndDisplayedUnderTaskQueue(uniqueText);

        StepLogger.stepId(3);
        StepLogger.step('Click on edit icon before Task name for any Item in list');
        await AccountsOnePageHelper.clickEditTask(uniqueText);
        StepLogger.verification('Edit task page should be displayed for the selected task');
        await AccountsOnePageHelper.verifySubjectIsEntered(uniqueText);
    });

    // Jira References - COTRAC-2170
    it('Verify the Edit Task page for a selected task - [22946650]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:27 GMT

        StepLogger.caseId = 22946650;
        const uniqueText = await PageHelper.getUniqueId();
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await AccountsOnePageHelper.navigateAndCreatTask(uniqueText);

        StepLogger.stepId(1);
        StepLogger.step('Go to task tab from the left menu panel');
        await AccountsOnePageHelper.clickTasksTabInSidebar();
        StepLogger.verification('Tasks should be displayed in a grid view for the opened Account');
        await AccountsOnePageHelper.verifyTasksPageIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on edit icon before Task name for any Item in list');
        await AccountsOnePageHelper.clickEditTask(uniqueText);
        StepLogger.verification('Edit task page should be displayed for the selected task');
        await AccountsOnePageHelper.verifySubjectIsEntered(uniqueText);

        StepLogger.stepId(3);
        StepLogger.step('Verify the data displayed in Edit task page for the opened task');
        StepLogger.verification('Data should be displayed correctly for the opened task record');
        await AccountsOnePageHelper.verifyTaskEnteredData(uniqueText);

        StepLogger.stepId(4);
        StepLogger.step('Verify data fields are displayed in editable format');
        StepLogger.verification('Data fields should be displayed in editable format');
        await AccountsOnePageHelper.verifyTaskDataField();

        StepLogger.stepId(5);
        StepLogger.step('Verify Tabs displayed in Edit Task page');
        StepLogger.verification(`Following tabs should be available in Edit Task page for the opened task record
            Overview,
            Notes,
            Sub Tasks,
            Attachments`);
        await AccountsOnePageHelper.verifyTaskTab();

        StepLogger.stepId(6);
        StepLogger.step('Verify buttons displayed in Edit Task page');
        StepLogger.verification(`Following buttons should be displayed in top right of the Edit Task page
            Print page, Save, Close`);
        await AccountsOnePageHelper.verifyTaskButton();
    });

    // Jira References - COTRAC-2170
    it('Verify that the User can Edit Task for a selected Account - [22946652]', async () => {
        // Auto generated by aurea-automation - util on Tue, 09 Apr 2019 13:59:28 GMT

        StepLogger.caseId = 22946652;
        const uniqueText = await PageHelper.getUniqueId();
        const editText = await PageHelper.getUniqueId();

        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await AccountsOnePageHelper.navigateAndCreatTask(uniqueText);

        StepLogger.stepId(1);
        StepLogger.step('Go to task tab from the left menu panel');
        await AccountsOnePageHelper.clickTasksTabInSidebar();
        StepLogger.verification('Tasks should be displayed in a grid view for the opened Account');
        await AccountsOnePageHelper.verifyTasksPageIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on edit icon before Task name for any Item in list');
        await AccountsOnePageHelper.clickEditTask(uniqueText);
        StepLogger.verification('Edit task page should be displayed for the selected task');
        await AccountsOnePageHelper.verifySubjectIsEntered(uniqueText);

        StepLogger.stepId(3);
        StepLogger.step('Edit the name of the opened task');
        await NewTaskPageHelper.enterSubject(editText);
        StepLogger.verification('Updated name should be displayed');
        await NewTaskPageHelper.verifySubjectIsEntered(editText);

        StepLogger.stepId(4);
        StepLogger.step('Edit Date Start /Date Due details');
        StepLogger.verification('Edited details should be displayed');
        await NewTaskPageHelper.enterDatesAndVerify();

        StepLogger.stepId(5);
        StepLogger.step('Edit the Status value from the dropdown');
        await NewTaskPageHelper.selectStatus(NewTaskPageConstant.acceptedInProgress);
        StepLogger.verification('Edited details should be displayed');
        await NewTaskPageHelper.verifyEnteredStatusIsSelected(NewTaskPageConstant.acceptedInProgress);

        StepLogger.stepId(6);
        StepLogger.step('Click Save button on top right of the page');
        await NewTaskPageHelper.clickSaveAndClose();
        StepLogger.verification('Edit task page should get closed and task should get updated in the list with updated data');
        await AccountsOnePageHelper.verifyTaskIsSavedAndDisplayedUnderTaskQueue(editText);
    });
});
