import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { CredentialsHelper } from '../../../../components/misc-utils/credentials-helper';
import { HomePage } from '../../../../page-objects/pages/home-page/home-page.po';
import { HomePage1Helper } from '../../../../page-objects/pages/home-page/home-page1.helper';
import { LoginPageHelper } from '../../../../page-objects/pages/login-page/login-page.helper';
import { PipelinePageHelper } from '../../../../page-objects/pages/pipeline/pipeline.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await loginPageHelper.goTo();
    });

    // Jira References - COTRAC-0000
    it('To verify that the user is able to login successfully as Administrator. - [22395398]', async () => {
        // Auto generated by aurea-automation - extension on Fri, 19 Apr 2019 04: 27: 34 GMT

        StepLogger.caseId = 22395398;
        StepLogger.stepId(1);
        StepLogger.step('Goto URL : http://ct-allinone-qa.coretrac.dev.avolin.com/ResourceOne/App/index.html#login');
        await loginPageHelper.goTo();
        StepLogger.verification('User should be able to navigate to the login page.');
        await LoginPageHelper.verifyLoginPage();

        // Step 2 is covered in step 3
        StepLogger.stepId(2);
        StepLogger.step('Enter username: r1adminpassword : editipt');
        StepLogger.verification('User should be able to enter the data.');

        StepLogger.stepId(3);
        StepLogger.step('Click "Sign in".');
        await LoginPageHelper.enterLoginInformation(CredentialsHelper.admin);
        StepLogger.verification('User should be able to login successfully.');
        await HomePage.pageTitle.verifyDisplayedStatus();
    });

    // Jira References - COTRAC-2319
    it('To verify user is able to open opportunity from Pipeline. - [22963118]', async () => {
        // Auto generated by aurea-automation - extension on Fri, 19 Apr 2019 04: 21: 28 GMT

        StepLogger.caseId = 22963118;
        StepLogger.preCondition('Log in and navigate to Production page and open an account ');
        await LoginPageHelper.loginAsAdmin();

        // Step 1-2 are covered in step 3
        StepLogger.stepId(1);
        StepLogger.step('Click "Opportunities" menu is displayed in left panel.');
        StepLogger.verification('Sub menus of opportunities should be displayed.');

        StepLogger.stepId(2);
        StepLogger.step('Verify Pipeline is displayed under opportunities.');
        StepLogger.verification('It should be displayed.');

        StepLogger.stepId(3);
        StepLogger.step('Click "Pipeline".');
        await HomePage1Helper.navigateToPipelinePage();
        StepLogger.verification('Pipeline should open.');
        await PipelinePageHelper.verifyPipelinePageDisplayed();
    });
});
