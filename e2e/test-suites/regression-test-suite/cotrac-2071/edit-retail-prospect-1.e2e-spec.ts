import { StepLogger } from '../../../../core/logger/step-logger';
import { PageHelper } from '../../../components/html/page-helper';
import { ContactPageOneHelper } from '../../../page-objects/pages/contact-page/contact-page-one.helper';
import { ContactPageHelper } from '../../../page-objects/pages/contact-page/contact-page.helper';
import { HomePageHelper } from '../../../page-objects/pages/home-page/home-page.helper';
import { HomePage } from '../../../page-objects/pages/home-page/home-page.po';
import { LoginPageHelper } from '../../../page-objects/pages/login-page/login-page.helper';
import { NewAccountPageHelper } from '../../../page-objects/pages/new-account-page/new-account-page.helper';
import { NewProspectPageHelper } from '../../../page-objects/pages/new-prospect-page/new-prospect-page.helper';
import { SuiteNames } from '../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await PageHelper.restartBrowser();
        await loginPageHelper.goTo();
    });

    // Jira References - COTRAC-2071
    it('Verify required validations on the  New Outside account pop up. - [22998316]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:33:37 GMT

        StepLogger.caseId = 22998316;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePageHelper.verifySearchButtonIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('Search criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Click on the Profile tab.');
        await ContactPageHelper.clickProfileTab();
        StepLogger.verification('Profile tab should open');
        await ContactPageHelper.verifyProfileTabIsDisplayed();

        StepLogger.stepId(6);
        StepLogger.step('Verify Outside Accounts table is appearing on the profile tab');
        StepLogger.verification('Outside Accounts table should be appearing on the profile tab.');
        await ContactPageHelper.verifyOutsideAccountsTableIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify user clicks on the "Add Account" button');
        await ContactPageHelper.clickAddAccount();
        StepLogger.verification('"New Outside Account" pop up should appear');
        await ContactPageHelper.verifyNewOutsideAccountModalIsDisplayed();

        StepLogger.stepId(8);
        StepLogger.step('Click on Save button.');
        await ContactPageOneHelper.clickSave(false);
        StepLogger.verification('Validation message should appear ');
        await ContactPageOneHelper.verifyAccountTypeAndInstitutionRequired();
    });

    // Jira References - COTRAC-2071
    it('Verify user is able to edit existing accounts. - [22998319]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:33:37 GMT

        StepLogger.caseId = 22998319;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspectWithAccount(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePage.header.searchButton.verifyDisplayedStatus();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('Search criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Click on the Profile tab.');
        await ContactPageHelper.clickProfileTab();
        StepLogger.verification('Profile tab should open');
        await ContactPageHelper.verifyProfileTabIsDisplayed();

        StepLogger.stepId(6);
        StepLogger.step('Verify Outside Accounts table is appearing on the profile tab');
        StepLogger.verification('Outside Accounts table should be appearing on the profile tab.');
        await ContactPageHelper.verifyOutsideAccountsTableIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Click on any record present in Outside Accounts table');
        await ContactPageOneHelper.clickAccountRow();
        StepLogger.verification('Outside account pop up should open with the information of the selected record.');
        await ContactPageHelper.verifyNewOutsideAccountModalIsDisplayed();

        StepLogger.stepId(8);
        StepLogger.step('Click on Account type  and select any new value from drop down.');
        const selectedAccount = await ContactPageOneHelper.selectAccountType();
        StepLogger.verification('Account type should be selected.');
        await ContactPageOneHelper.verifySelectedAccountType(selectedAccount);

        StepLogger.stepId(9);
        StepLogger.step('Click on save button');
        await ContactPageOneHelper.clickSave();
        StepLogger.verification('Outside account pop up should  close and changes should be appearing in the grid');
        await ContactPageHelper.verifyNewOutsideAccountModalIsDisplayed();
    });

    // Jira References - COTRAC-2071
    it('Verify user is able to update information on Profile tab. - [22998326]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:33:37 GMT

        StepLogger.caseId = 22998326;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspectWithAccount(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePage.header.searchButton.verifyDisplayedStatus();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('Search criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Click on the Profile tab.');
        await ContactPageHelper.clickProfileTab();
        StepLogger.verification('Profile tab should open');
        await ContactPageHelper.verifyProfileTabIsDisplayed();

        StepLogger.stepId(6);
        StepLogger.step('Verify Outside Accounts table is appearing on the profile tab');
        StepLogger.verification('Outside Accounts table should be appearing on the profile tab.');
        await ContactPageHelper.verifyOutsideAccountsTableIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify user clicks on the "Add Account" button');
        await ContactPageOneHelper.clickAccountRow();
        StepLogger.verification('"New Outside Account" pop up should appear');
        await ContactPageHelper.verifyNewOutsideAccountModalIsDisplayed();

        StepLogger.stepId(8);
        StepLogger.step('Select Account Type from drop down');
        const selectedAccount = await ContactPageOneHelper.selectAccountType();
        StepLogger.verification('Account type should  be selected.');
        await ContactPageOneHelper.verifySelectedAccountType(selectedAccount);

        StepLogger.stepId(9);
        StepLogger.step('Click on Save button');
        await ContactPageOneHelper.clickSave();
        StepLogger.verification('Record should be saved successfully pop up should close');
        await ContactPageOneHelper.verifyNewOutsideAccountModalClosed();

        StepLogger.stepId(10);
        StepLogger.step('Verify that updated account type is appearing in the  Outside Accounts table');
        StepLogger.verification('updated account type should be appearing in the  Outside Accounts table');
        await ContactPageHelper.verifyOutsideAccountsTableIsDisplayed();
    });

    // Jira References - COTRAC-2071
    it('Click on the Search result and verify contact page is opened. - [22998301]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:39:41 GMT

        StepLogger.caseId = 22998301;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePageHelper.verifySearchButtonIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('Search text box should appear .');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Enter search criteria.');
        await HomePageHelper.enterSearchCriteria(uniqueName);
        StepLogger.verification('SEarch criteria should be entered.');
        await HomePageHelper.verifySearchCriteriaIsEntered(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(5);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed();
    });

    // Jira References - COTRAC-2071
    it('Verify user clicks on Close button and verify Warning pop up - [22998343]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:39:41 GMT

        StepLogger.caseId = 22998343;
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePageHelper.verifySearchButtonIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('SEarch criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Click on Close button present on the top right side of the page');
        await NewAccountPageHelper.clickClose();
        StepLogger.verification('Warning pop up should appear with Heading "Warning"  and OK and Cancel buttons');
        await NewAccountPageHelper.verifyConfirmWindow();
    });

    // Jira References - COTRAC-2071
    it('Verify Outside Accounts is appearing on profile tab. - [22998312]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:39:41 GMT

        StepLogger.caseId = 22998312;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePageHelper.verifySearchButtonIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('SEarch criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Click on the Profile tab.');
        await ContactPageHelper.clickProfileTab();
        StepLogger.verification('Profile tab should open');
        await ContactPageHelper.verifyProfileTabIsDisplayed();

        StepLogger.stepId(6);
        StepLogger.step('Verify Outside Accounts table is appearing on the profile tab');
        StepLogger.verification('Outside Accounts table should be appearing on the profile tab.');
        await ContactPageHelper.verifyOutsideAccountsTableIsDisplayed();
    });

    // Jira References - COTRAC-2071
    it('Verify tabs appearing on contact page. - [22998303]', async () => {
        // Auto generated by aurea-automation - util on Fri, 05 Apr 2019 07:39:41 GMT

        StepLogger.caseId = 22998303;
        StepLogger.preCondition('Execute C22395398 to login as an administrator');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Verify Search button is appearing on the top right side of the page.');
        StepLogger.verification('Search button should be appearing on the top right side of the home page');
        await HomePageHelper.verifySearchButtonIsDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify user clicks on Search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('SEarch criteria should be entered.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(3);
        StepLogger.step('Verify user clicks on the search button');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('Search result should be returned.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Search result');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification(`A new page should open in a  new tab and contact name
            heading should be appearing on the top of the page. Overview tab should be open.`);
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(5);
        StepLogger.step('Verify tabs appearing on the page.');
        StepLogger.verification('Following tabs should be appearing on the page');
        await ContactPageOneHelper.verifyContactPageTabs();
    });
});
