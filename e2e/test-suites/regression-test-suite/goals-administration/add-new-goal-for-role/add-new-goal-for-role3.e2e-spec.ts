import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { WaitHelper } from '../../../../components/html/wait-helper';
import { RandomHelper } from '../../../../components/misc-utils/random-helper';
import { GoalsConstants } from '../../../../page-objects/pages/administration/goals/goals.constants';
import { GoalsHelper } from '../../../../page-objects/pages/administration/goals/goals.helper';
import { GoalsPageHelper } from '../../../../page-objects/pages/goals-page/goals-page.helper';
import { HomePageHelper } from '../../../../page-objects/pages/home-page/home-page.helper';
import { HomePage1Helper } from '../../../../page-objects/pages/home-page/home-page1.helper';
import { LoginPageHelper } from '../../../../page-objects/pages/login-page/login-page.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await loginPageHelper.goTo();
        await LoginPageHelper.loginAsAdmin();
    });

    it('To verify that validation error message is displayed when user clicks save without selecting any role. - [22932144]', async () => {
        // Auto generated by aurea-automation - util on Tue, 16 Apr 2019 08:32:45 GMT

        StepLogger.caseId = 22932144;
        const role = GoalsConstants.goal;
        const error = GoalsConstants.error.role;
        const value = await PageHelper.getUniqueId();

        StepLogger.stepId(1);
        StepLogger.step('Click "Administration -> Goals".');
        await HomePageHelper.clickAdministrationLink();
        await HomePageHelper.clickGoalsUnderAdministration();
        StepLogger.verification('"Manage Goals" should be displayed.');
        await GoalsHelper.verifyManageGoalsPage();

        StepLogger.stepId(2);
        StepLogger.step('Click "Add Goal".');
        await GoalsHelper.clickOnAddGoal();
        StepLogger.verification('"New Goal" page should be displayed.');
        await GoalsHelper.verifyNewGoalsScreen();

        StepLogger.stepId(3);
        StepLogger.step('Select "Role" in "goal is for" field.');
        await GoalsPageHelper.selectGoalIsFor(role);
        StepLogger.verification('Role field should be displayed.');
        await GoalsPageHelper.verifySelectedGoalIsFor(role);
        await WaitHelper.sleepForTwoSeconds();

        StepLogger.stepId(4);
        StepLogger.step('Click "save" without selecting any values.');
        await GoalsHelper.enterDescription(value);
        await GoalsHelper.clickOnSave();
        StepLogger.verification('Validation Error Message should be displayed.');
        await GoalsHelper.verifyValidationErrorMessage(error);
    });

    it('To verify that validation error message is displayed when target value is left blank. - [22932146]', async () => {
        // Auto generated by aurea-automation - util on Tue, 16 Apr 2019 10:37:30 GMT

        StepLogger.caseId = 22932146;
        const role = GoalsConstants.goal;
        const role1 = GoalsConstants.businessDevelopment;
        const goalType = GoalsConstants.production;
        const year = GoalsConstants.year;
        const value = await PageHelper.getUniqueId();
        const error = GoalsConstants.error.targetType;

        StepLogger.stepId(1);
        StepLogger.step('Click "Administration -> Goals".');
        await HomePageHelper.clickAdministrationLink();
        await HomePageHelper.clickGoalsUnderAdministration();
        StepLogger.verification('"Manage Goals" should be displayed.');
        await GoalsHelper.verifyManageGoalsPage();

        StepLogger.stepId(2);
        StepLogger.step('Click "Add Goal".');
        await GoalsHelper.clickOnAddGoal();
        StepLogger.verification('"New Goal" page should be displayed.');
        await GoalsHelper.verifyNewGoalsScreen();

        StepLogger.stepId(3);
        StepLogger.step('Select "Role" in "goal is for" field.');
        await GoalsPageHelper.selectGoalIsFor(role);
        StepLogger.verification('Role field should be displayed.');
        await GoalsPageHelper.verifySelectedGoalIsFor(role);

        StepLogger.stepId(4);
        StepLogger.step('Select a role from the drop down.');
        await GoalsPageHelper.selectRole(role1);
        StepLogger.verification('User should be selected.');
        await GoalsPageHelper.verifySelectedRole(role1);

        StepLogger.stepId(5);
        StepLogger.step('Select "goal type"');
        await GoalsPageHelper.selectGoalType(goalType);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedGoalType(goalType);

        StepLogger.stepId(6);
        StepLogger.step('Select "Period type"');
        await GoalsPageHelper.selectPeriodType(year);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedPeriodType(year);
        await WaitHelper.sleepForTwoSeconds();

        StepLogger.stepId(7);
        StepLogger.step('Click "save".');
        await GoalsHelper.enterDescription(value);
        await GoalsHelper.clickOnSave();
        StepLogger.verification('Validation error message should be displayed.');
        await GoalsHelper.verifyValidationErrorMessage(error);
    });

    it('To verify that user is able to create goal with Month as period type. - [22932149]', async () => {
        // Auto generated by aurea-automation - util on Tue, 16 Apr 2019 11:54:25 GMT

        StepLogger.caseId = 22932149;
        const role = GoalsConstants.goal;
        const role1 = GoalsConstants.businessDevelopment;
        const goalType = GoalsConstants.production;
        const month = GoalsConstants.month;
        const num = await RandomHelper.getRandomNumber(1);
        const dollar = GoalsConstants.dollars;
        const active = GoalsConstants.active;

        StepLogger.stepId(1);
        StepLogger.step('Click "Administration -> Goals".');
        await HomePageHelper.clickAdministrationLink();
        await HomePage1Helper.clickOnGoalsOptionUnderAdministration();
        StepLogger.verification('"Manage Goals" should be displayed.');
        await GoalsHelper.verifyManageGoalsPage();

        StepLogger.stepId(2);
        StepLogger.step('Click "Add Goal".');
        await GoalsHelper.clickOnAddGoal();
        StepLogger.verification('"New Goal" page should be displayed.');
        await GoalsHelper.verifyNewGoalsScreen();

        StepLogger.stepId(3);
        StepLogger.step('Select "Role" in "goal is for" field.');
        await GoalsPageHelper.selectGoalIsFor(role);
        StepLogger.verification('Role field should be displayed.');
        await GoalsPageHelper.verifySelectedGoalIsFor(role);

        StepLogger.stepId(4);
        StepLogger.step('Select a role from the drop down.');
        await GoalsPageHelper.selectRole(role1);
        StepLogger.verification('User should be selected.');
        await GoalsPageHelper.verifySelectedRole(role1);

        StepLogger.stepId(5);
        StepLogger.step('Select "goal type"');
        await GoalsPageHelper.selectGoalType(goalType);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedGoalType(goalType);

        StepLogger.stepId(6);
        StepLogger.step('Select Month in "Period type" field');
        await GoalsPageHelper.selectPeriodType(month);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedPeriodType(month);

        StepLogger.stepId(7);
        StepLogger.step('Enter value in " target type"  and "Target value" field.');
        await GoalsPageHelper.enterTargetValue(num);
        await GoalsPageHelper.selectTargetType(dollar);
        StepLogger.verification('It should be entered.');
        await GoalsPageHelper.verifyTargetValue(num);
        await GoalsPageHelper.verifySelectedTargetType(dollar);

        StepLogger.stepId(8);
        StepLogger.step('Enter description.');
        await GoalsPageHelper.enterDescription(dollar);
        StepLogger.verification('Description should be entered.');
        await GoalsPageHelper.verifyDescriptionTextValue(dollar);

        StepLogger.stepId(9);
        StepLogger.step('Enter display order.');
        await GoalsPageHelper.enterDisplayOrder(num);
        StepLogger.verification('It should be entered.');
        await GoalsPageHelper.verifyDisplayOrderValue(num);

        StepLogger.stepId(10);
        StepLogger.step('Verify "Active" is selected by default in status field.');
        StepLogger.verification('It should be selected.');
        await GoalsHelper.verifyStatusSelected(active);

        StepLogger.stepId(11);
        StepLogger.step('Click "save".');
        await GoalsHelper.clickOnSave();
        StepLogger.verification('Active Goal with year period type should be saved.');
        await GoalsPageHelper.verifySelectedPeriodType(month);
    });

    it('To verify that user is able to create an inactive goal. - [22932150]', async () => {
        // Auto generated by aurea-automation - util on Tue, 16 Apr 2019 12:14:55 GMT

        StepLogger.caseId = 22932150;
        const role = GoalsConstants.goal;
        const role1 = GoalsConstants.businessDevelopment;
        const goalType = GoalsConstants.production;
        const year = GoalsConstants.year;
        const num = await RandomHelper.getRandomNumber(1);
        const dollar = GoalsConstants.dollars;
        const inactive = GoalsConstants.inactive;

        StepLogger.stepId(1);
        StepLogger.step('Click "Administration -> Goals".');
        await HomePageHelper.clickAdministrationLink();
        await HomePage1Helper.clickOnGoalsOptionUnderAdministration();
        StepLogger.verification('"Manage Goals" should be displayed.');
        await GoalsHelper.verifyManageGoalsPage();

        StepLogger.stepId(2);
        StepLogger.step('Click "Add Goal".');
        await GoalsHelper.clickOnAddGoal();
        StepLogger.verification('"New Goal" page should be displayed.');
        await GoalsHelper.verifyNewGoalsScreen();

        StepLogger.stepId(3);
        StepLogger.step('Select "Role" in "goal is for" field.');
        await GoalsPageHelper.selectGoalIsFor(role);
        StepLogger.verification('Role field should be displayed.');
        await GoalsPageHelper.verifySelectedGoalIsFor(role);

        StepLogger.stepId(4);
        StepLogger.step('Select a role from the drop down.');
        await GoalsPageHelper.selectRole(role1);
        StepLogger.verification('User should be selected.');
        await GoalsPageHelper.verifySelectedRole(role1);

        StepLogger.stepId(5);
        StepLogger.step('Select "goal type"');
        await GoalsPageHelper.selectGoalType(goalType);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedGoalType(goalType);

        StepLogger.stepId(6);
        StepLogger.step('Select year in "Period type" field');
        await GoalsPageHelper.selectPeriodType(year);
        StepLogger.verification('It should be selected.');
        await GoalsPageHelper.verifySelectedPeriodType(year);

        StepLogger.stepId(7);
        StepLogger.step('Enter value in " target type"  and "Target value" field.');
        await GoalsPageHelper.enterTargetValue(num);
        await GoalsPageHelper.selectTargetType(dollar);
        StepLogger.verification('It should be entered.');
        await GoalsPageHelper.verifyTargetValue(num);
        await GoalsPageHelper.verifySelectedTargetType(dollar);

        StepLogger.stepId(8);
        StepLogger.step('Enter description.');
        await GoalsPageHelper.enterDescription(dollar);
        StepLogger.verification('Description should be entered.');
        await GoalsPageHelper.verifyDescriptionTextValue(dollar);

        StepLogger.stepId(9);
        StepLogger.step('Enter display order.');
        await GoalsPageHelper.enterDisplayOrder(num);
        StepLogger.verification('It should be entered.');
        await GoalsPageHelper.verifyDisplayOrderValue(num);

        StepLogger.stepId(10);
        StepLogger.step('Select "In - Active" is selected by default in status field.');
        await GoalsHelper.selectAStatusFromDropDown(inactive);
        StepLogger.verification('It should be selected.');
        await GoalsHelper.verifyStatusSelected(inactive);

        StepLogger.stepId(11);
        StepLogger.step('Click "save".');
        await GoalsHelper.clickOnSave();
        StepLogger.verification('In - Active Goal with year period type should be saved.');
        await GoalsHelper.verifyStatusSelected(inactive);
        await GoalsPageHelper.verifySelectedPeriodType(year);
    });
});
