import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { HomePageHelper } from '../../../../page-objects/pages/home-page/home-page.helper';
import { LoginPageHelper } from '../../../../page-objects/pages/login-page/login-page.helper';
import { KnowledgeBase1Constant } from '../../../../page-objects/pages/service-center/knowledge-base/knowledge-base.constants';
import { KnowledgeBase1Helper } from '../../../../page-objects/pages/service-center/knowledge-base/knowledge-base.helper';
import { SuiteNames } from '../../../helpers/suite-names';

const baseArticle = KnowledgeBase1Constant.baseArticle;
const newTicketArticle = KnowledgeBase1Constant.newTicketArticle;
const cardArticle = KnowledgeBase1Constant.cardArticle;
const printerArticle = KnowledgeBase1Constant.printerArticle;

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await PageHelper.restartBrowser();
        await loginPageHelper.goTo();
        await LoginPageHelper.loginAsAdmin();
    });

    // Jira References - COTRAC-151
    it('Verify if Detail Cards list is displaying the cards order properly - [22406253]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:43 GMT

        StepLogger.caseId = 22406253;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory(newTicketArticle.category);
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            newTicketArticle.name,
            newTicketArticle.category,
            newTicketArticle.description);

        StepLogger.stepId(4);
        StepLogger.step('Check the cards order.');
        StepLogger.verification('Should display the cards ordered ascending by created date.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecordsAreSortedInCreatedOnDateAscendingOrder();
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to search data in card details screen - [22406252]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:44 GMT

        StepLogger.caseId = 22406252;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory(baseArticle.category);
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            cardArticle.category,
            cardArticle.description);

        StepLogger.stepId(4);
        StepLogger.step('Click on "Printer not working 2" card in the screen.');
        await KnowledgeBase1Helper.clickRefreshButton();
        await KnowledgeBase1Helper.clickBaseCategory(printerArticle.category);
        StepLogger.verification('Should open a modal with card details.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            printerArticle.name,
            printerArticle.category,
            printerArticle.description);

        StepLogger.stepId(5);
        StepLogger.step('Search the text "not" and hit the "Enter" key in the keyboard.');
        await KnowledgeBase1Helper.search('not');
        StepLogger.verification('Should display one card related to the text searched by user.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            'not',
            'not',
            printerArticle.description);
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to close the cards detail clicking on "x" button - [22406251]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:47 GMT

        StepLogger.caseId = 22406251;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory(baseArticle.category);
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            cardArticle.category,
            cardArticle.description);

        StepLogger.stepId(4);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickKnowledgeBase(baseArticle.name);
        StepLogger.verification('Should open a modal with card details.');
        await KnowledgeBase1Helper.verifyKnowledgeBasePopup(baseArticle.name, baseArticle.description);

        StepLogger.stepId(5);
        StepLogger.step('Click on "X" button in the screen.');
        await KnowledgeBase1Helper.clickXButtonToClosePopup();
        StepLogger.verification('Should close the modal with card details.');
        await KnowledgeBase1Helper.verifyPopupClosedAndCategoryPage(baseArticle.name);
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to close the cards detail clicking on Close button - [22406250]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:46 GMT

        StepLogger.caseId = 22406250;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory(baseArticle.category);
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            cardArticle.category,
            cardArticle.description);

        StepLogger.stepId(4);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickKnowledgeBase(baseArticle.name);
        StepLogger.verification('Should open a modal with card details.');
        await KnowledgeBase1Helper.verifyKnowledgeBasePopup(baseArticle.name, baseArticle.description);

        StepLogger.stepId(5);
        StepLogger.step('Click on "Close" button in the screen.');
        await KnowledgeBase1Helper.clickCloseKnowledgeBasePopup();
        StepLogger.verification('Should close the modal with card details.');
        await KnowledgeBase1Helper.verifyPopupClosedAndCategoryPage(baseArticle.name);
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to see the cards detail - [22406249]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:04:01 GMT

        StepLogger.caseId = 22406249;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory(baseArticle.category);
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            cardArticle.category,
            cardArticle.description);

        StepLogger.stepId(4);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickKnowledgeBase(baseArticle.name);
        StepLogger.verification('Should open a modal with card details.');
        await KnowledgeBase1Helper.verifyKnowledgeBasePopup(baseArticle.name, baseArticle.description);
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to see the categories detail - [22406248]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:54 GMT

        StepLogger.caseId = 22406248;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on any card in the screen.');
        await KnowledgeBase1Helper.clickBaseCategory('Card');
        StepLogger.verification('Should open the Card detail screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            cardArticle.category,
            cardArticle.description);
    });

    // Jira References - COTRAC-151
    it('Verify if the Categories screen data is displaying properly - [22406247]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:51 GMT

        StepLogger.caseId = 22406247;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Check the data in the Categories screen.');
        StepLogger.verification('Should display the card details with:-List of Cards-Search field (placeholder "SEARCH")');
        await KnowledgeBase1Helper.verifyBaseCategory(baseArticle.category);
        await KnowledgeBase1Helper.verifySearchTextBoxDisplayed();
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to search the categories properly - [22406245]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:53 GMT

        StepLogger.caseId = 22406245;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on Search input field and find the text "Card"');
        await KnowledgeBase1Helper.search(baseArticle.category);
        StepLogger.verification('Should display the cards with "Card" text in the screen properly.');
        await KnowledgeBase1Helper.verifyKnowledgeBaseRecord(
            cardArticle.name,
            KnowledgeBase1Constant.elementNames.categories,
            cardArticle.description);
    });

    // Jira References - COTRAC-151
    it('Verify if user shall be able to access the screen from menu - [22406244]', async () => {
        // Auto generated by aurea-automation - util on Thu, 06 Jun 2019 12:02:43 GMT

        StepLogger.caseId = 22406244;
        StepLogger.stepId(1);
        StepLogger.step('Click on Service Center menu option.');
        await HomePageHelper.clickServiceCenterLink();
        StepLogger.verification('Should expand the Service Center section.');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(2);
        StepLogger.step('Check the Service Center menu list.');
        StepLogger.verification('Should have the items:-Tickets-Cases-Knowledge Base');
        await HomePageHelper.verifyOptionsUnderServiceCenterMenu();

        StepLogger.stepId(3);
        StepLogger.step('Click on Knowledge Base option.');
        await HomePageHelper.clickKnowledgeBaseUnderServiceCenter();
        StepLogger.verification('Should open the Categories page properly.');
        await KnowledgeBase1Helper.verifyCategoriesPageTitleDisplayed();
    });
});
