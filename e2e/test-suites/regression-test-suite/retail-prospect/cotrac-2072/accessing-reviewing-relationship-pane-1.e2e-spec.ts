import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { AccountsPage } from '../../../../page-objects/pages/accounts/accounts.po';
import { ContactPageOneHelper } from '../../../../page-objects/pages/contact-page/contact-page-one.helper';
import { ContactPageHelper } from '../../../../page-objects/pages/contact-page/contact-page.helper';
import { HomePageHelper } from '../../../../page-objects/pages/home-page/home-page.helper';
import { LoginPageHelper } from '../../../../page-objects/pages/login-page/login-page.helper';
import { NewProspectPageHelper } from '../../../../page-objects/pages/new-prospect-page/new-prospect-page.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: LoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = LoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await PageHelper.restartBrowser();
        await loginPageHelper.goTo();
    });

    // Jira References - COTRAC-2072
    it('Verify refresh button on Relationship Pane of a Retail Prospect - [22980796]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:58 GMT

        StepLogger.caseId = 22980796;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Click on Refresh button on right side');
        await AccountsPage.casePageElements.refreshButton.clickButton();
        StepLogger.verification('The screen is refreshed and the data is updated accordingly.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();
    });

    // Jira References - COTRAC-2072
    it('Verify tabs present on Relationship Pane of a Retail Prospect - [22980712]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:57 GMT

        StepLogger.caseId = 22980712;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(7);
        StepLogger.step('Verify tabs present on Relationship Pane of a Retail Prospect');
        StepLogger.verification('The following tabs are present on Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();
    });

    // Jira References - COTRAC-2072
    it('Verify Lost Opportunities section listed in Summary tab of Relationship Pane - [22980771]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:57 GMT

        StepLogger.caseId = 22980771;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(8);
        StepLogger.step('Verify sections present in Summary tab on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The following sections present in Summary tab on the Relationship Pane of a Retail Prospect:');
        await ContactPageHelper.verifySummaryTabOptionsDisplayedInRelationshipPane();

        StepLogger.stepId(9);
        StepLogger.step('Verify Lost Opportunities section listed in Summary tab of Relationship Pane');
        StepLogger.verification('The Lost Opportunities section listed in Summary tab of Relationship Pane has the following fields');
        await ContactPageOneHelper.verifyLostOpportunitiesSection();
    });

    // Jira References - COTRAC-2072
    it('Verify sections of screen can be collapsed on Summary tab of Relationship Pane - [22980803]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:56 GMT

        StepLogger.caseId = 22980803;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(8);
        StepLogger.step('Click on the upward arrow next to any section to collapse the section.');
        await ContactPageOneHelper.clickCollapse();
        StepLogger.verification('The sections of screen can be collapsed');
        await ContactPageOneHelper.verifyCollapsedResult();
    });

    // Jira References - COTRAC-2072
    it('Verify sections of screen can be expanded on Summary tab of Relationship Pane - [22980807]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:56 GMT

        StepLogger.caseId = 22980807;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(8);
        StepLogger.step('Click on the upward arrow next to any section to collapse the section.');
        await ContactPageOneHelper.clickCollapse();
        StepLogger.verification('The sections of screen can be collapsed');
        await ContactPageOneHelper.verifyCollapsedResult();

        StepLogger.stepId(9);
        StepLogger.step('Click on the downward arrow next to the collapsed section to expand the section.');
        await ContactPageOneHelper.clickExpand();
        StepLogger.verification('The sections of screen can be expanded.');
        await ContactPageOneHelper.verifyExpandedResult();
    });

    // Jira References - COTRAC-2072
    it('Verify Add Account button on Summary tab of Relationship Pane - [22980811]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:57 GMT

        StepLogger.caseId = 22980811;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(8);
        StepLogger.step('Click on Add Account button on Summary tab');
        await ContactPageOneHelper.clickAddAccountOnSummaryTab();
        StepLogger.verification('The New Account page is displayed.');
        await ContactPageOneHelper.verifyNewAccountPageDisplayed();
    });

    // Jira References - COTRAC-2072
    it('Verify Add Opportunity button on Summary tab of Relationship Pane - [22980809]', async () => {
        // Auto generated by aurea-automation - util on Tue, 02 Apr 2019 17:05:57 GMT

        StepLogger.caseId = 22980809;
        StepLogger.preCondition('Existing Retail Prospect/Contact is added, C22991222');
        const uniqueName = PageHelper.getUniqueId();
        await NewProspectPageHelper.navigateAndAddExistingProspect(uniqueName);

        StepLogger.stepId(1);
        StepLogger.step('Click on global search button.');
        await HomePageHelper.clickSearchButton();
        StepLogger.verification('The Search text field is displayed.');
        await HomePageHelper.verifySearchBox();

        StepLogger.stepId(2);
        StepLogger.step('Select Contacts from the dropdown next to search text field.');
        await HomePageHelper.selectContactsFromSearchDropdown();
        StepLogger.verification('The Contacts option is selected from the dropdown.');
        await HomePageHelper.verifyContactsOptionIsSelectedInDropdown();

        StepLogger.stepId(3);
        StepLogger.step('Enter the name of the Retail Prospect on the search bar and click on the search button e.g. Baldwin, Alec');
        await HomePageHelper.enterSearchTextAndClicksearch(uniqueName);
        StepLogger.verification('The Contact card is displayed on the screen.');
        await HomePageHelper.verifyContactCardIsDisplayed(uniqueName);

        StepLogger.stepId(4);
        StepLogger.step('Click on the Retail Prospect Contact card.');
        await HomePageHelper.clickOnSearchResult(uniqueName);
        StepLogger.verification('The Snapshot window of the Contact is displayed.');
        const snapShotPresence = await ContactPageHelper.verifySnapshotModal(false);

        StepLogger.stepId(5);
        StepLogger.step('Close the Snapshot Window');
        await ContactPageHelper.closeSnapshot(snapShotPresence);
        StepLogger.verification('The details of the contact is displayed on a new page with Overview tab displayed by default.');
        await ContactPageHelper.verifyOverviewIsDisplayed(false);

        StepLogger.stepId(6);
        StepLogger.step('Click on Relationship button in the left side navigation pane.');
        await ContactPageHelper.clickRelationshipTab();
        StepLogger.verification('The screen is refreshed and the Relationship page is displayed on the right side pane.');
        await ContactPageHelper.verifyRelationshipTabIsDisplayed();

        StepLogger.stepId(7);
        StepLogger.step('Verify Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        StepLogger.verification('The Summary tab is displayed by default on the Relationship Pane of a Retail Prospect');
        await ContactPageHelper.verifySummaryTabIsSelected();

        StepLogger.stepId(8);
        StepLogger.step('Click on Add Opportunity button on Summary tab');
        await ContactPageOneHelper.clickAddOpportunityOnSummaryTab();
        StepLogger.verification('The New Opportunity page is displayed.');
        await ContactPageOneHelper.verifyNewOppurtunityPageDisplayed();
    });
});
